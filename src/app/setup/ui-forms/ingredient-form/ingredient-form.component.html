
<div class="flex flex-col">
    <h2 mat-dialog-title>{{isEdit ? 'Edit' : 'Add'}} Ingredient</h2>
    <mat-dialog-content class="mat-typography" >
      <form [formGroup]="form" class="flex flex-col space-y-5 pt-3">
        <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/2">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Ingredient Name</mat-label>
              <input matInput placeholder="John Doe" formControlName="name" required>
              <mat-error *ngIf="form.get('name')?.touched && form.get('name')?.invalid">Ingredient Name is required</mat-error>

            </mat-form-field>
          </div>
          <div class="md:w-1/2">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Ingredient Code</mat-label>
              <input matInput placeholder="John Doe" formControlName="code"  required>
              <mat-error *ngIf="form.get('code')?.touched && form.get('code')?.invalid">Ingredient Code is required</mat-error>

            </mat-form-field>
          </div>
        </div>

        <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/3">


            <mat-form-field floatLabel="always" appearance="outline">
              <mat-label>Ingredient Price</mat-label>
              <input matInput type="number"  placeholder="0.00" formControlName="unitPrice" required>
              <span matTextPrefix>ETB&nbsp;</span>
              <mat-error *ngIf="form.get('unitPrice')?.touched && form.get('unitPrice')?.invalid">Ingredient Price is required</mat-error>

            </mat-form-field>
          </div>
          <div class="md:w-1/3">


            <mat-form-field floatLabel="always" appearance="outline">
              <mat-label>Discount</mat-label>
              <input matInput type="number" class="example-right-align" placeholder="0.00" formControlName="discount"  required>
              <span matTextPrefix>ETB&nbsp;</span>
              <mat-error *ngIf="form.get('discount')?.touched && form.get('discount')?.invalid">Discount is required</mat-error>

            </mat-form-field>
            <!-- <mat-form-field class="w-full" appearance="outline">
              <mat-label>Discount</mat-label>
              <input matInput placeholder="John Doe" formControlName="name" [(ngModel)]="candidate.name" required>
              <mat-error *ngIf="form.get('name')?.touched && form.get('name')?.invalid">Name is required</mat-error>

            </mat-form-field> -->
          </div>
          <div class="md:w-1/3">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Maximum Threshold </mat-label>
              <input matInput placeholder="0" type="number" formControlName="maxThreshold"  required>
              <mat-error *ngIf="form.get('maxThreshold')?.touched && form.get('maxThreshold')?.invalid">Maximum Threshold is required</mat-error>

            </mat-form-field>
          </div>
        </div>

        <!-- <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/3">
              <mat-form-field class="w-full" appearance="outline">
                <mat-label>Queue Day</mat-label>
                <input matInput #queueDay maxlength="1" type="number" placeholder="Ex. 1" formControlName="averageQueueDay" required>
                <mat-hint align="end">{{queueDay.value.length}} / 1</mat-hint>
                <mat-error *ngIf="form.get('averageQueueDay')?.touched && form.get('averageQueueDay')?.invalid">Average Queue Day is required</mat-error>
              </mat-form-field>
          </div>
          <div class="md:w-1/3">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Queue Hour</mat-label>
              <input matInput #queueHour maxlength="1" type="number" placeholder="Ex. 1" formControlName="averageQueueTimeHour" required>
              <mat-hint align="end">{{queueHour.value.length}} / 1</mat-hint>
              <mat-error *ngIf="form.get('averageQueueTimeHour')?.touched && form.get('averageQueueTimeHour')?.invalid">Average Queue Hour is required</mat-error>

            </mat-form-field>
          </div>
          <div class="md:w-1/3">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Queue Minute</mat-label>
              <input matInput #queueMinute type="number" type="number" min="1" max="60" placeholder="Ex. 30" formControlName="averageQueueTimeMinute"  required>
              <mat-hint align="end">{{queueMinute.value.length}} / 2</mat-hint>
              <mat-error *ngIf="form.get('averageQueueTimeMinute')?.touched && form.get('averageQueueTimeMinute')?.invalid">Average Queue Minute is required</mat-error>
            </mat-form-field>
          </div>

        </div> -->


        <mat-form-field appearance="outline">
          <mat-label>Description</mat-label>
          <textarea formControlName="description" matInput></textarea>
          <mat-error *ngIf="form.get('description')?.touched && form.get('description')?.invalid">Product Description is required</mat-error>

        </mat-form-field>

        <!-- <mat-form-field appearance="outline">
          <mat-label>Main Ingredients</mat-label>
          <textarea formControlName="mainIngredients" matInput></textarea>
        </mat-form-field> -->

        <!-- <mat-form-field appearance="outline">
          <mat-label>Tag</mat-label>
          <textarea formControlName="tag" matInput></textarea>
          <mat-error *ngIf="form.get('tag')?.touched && form.get('tag')?.invalid">Product Tag is required</mat-error>
        </mat-form-field> -->

        <!-- <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/2">


            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Select a Category</mat-label>
              <mat-select formControlName="categoryId"   (selectionChange)="onCategorySelectionChange($event)">
                <ng-container *ngFor="let category of selectedCategoriesField">
                  <mat-option [value]="category.id">{{category.categoryName}} </mat-option>
                </ng-container>
              </mat-select>
            <mat-error *ngIf="form.get('categoryId')?.touched && form.get('categoryId')?.invalid">Select Category</mat-error>

            </mat-form-field>


          </div>
          <div class="md:w-1/2">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Select a Sub Category</mat-label>
              <mat-select formControlName="subCategoryId" [value]="product?.subCategoryId">
                <ng-container *ngFor="let subCategory of selectedSubCategoriesField">
                  <mat-option [value]="subCategory.id">{{ subCategory.subCategoryName }}</mat-option>
                </ng-container>
              </mat-select>
            <mat-error *ngIf="form.get('subCategoryId')?.touched && form.get('subCategoryId')?.invalid">Select Sub Category</mat-error>
            </mat-form-field>

          </div>

        </div> -->

        <div class="w-full">
          <div class="flex">
            <input type="file" (change)="handleImageUpload($event)" accept="image/*">
            <div  *ngIf="selectedImage">
              <img class="w-32 h-auto" [src]="selectedImagePreview" alt="Selected Image">
            </div>
          </div>

        </div>
        <button
         class="bg-[#0E483F] text-white py-2 px-4 font-cormorant text-xl rounded-lg hover:bg-white hover:text-[#0E483F] hover:border hover:border-[#0E483F] transition-transform duration-300 transform"
        (click)="onSave()"
      >
        Save
      </button>
      </form>
    </mat-dialog-content>
  </div>
